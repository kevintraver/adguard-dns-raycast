{
  "$schema": "https://www.raycast.com/schemas/extension.json",
  "name": "adguard-dns",
  "title": "AdGuard DNS",
  "description": "Troubleshoot service issues by analyzing AdGuard DNS query logs and unblocking domains",
  "icon": "extension-icon.png",
  "author": "kevintraver",
  "owner": "adguard",
  "categories": [
    "Developer Tools",
    "Productivity"
  ],
  "license": "MIT",
  "version": "1.0.0",
  "commands": [
    {
      "name": "index",
      "title": "AdGuard DNS",
      "description": "View extension information and usage instructions",
      "mode": "view"
    }
  ],
  "tools": [
    {
      "name": "get-query-log",
      "title": "Get DNS Query Log",
      "description": "Fetches recent DNS query logs from AdGuard DNS to identify blocked domains. Can search from the last few minutes to hours back.",
      "mode": "no-view"
    },
    {
      "name": "unblock-domain",
      "title": "Unblock Domain",
      "description": "Adds whitelist rules to unblock one or more domains in AdGuard DNS.",
      "mode": "no-view"
    }
  ],
  "preferences": [
    {
      "name": "adguardApiToken",
      "type": "password",
      "required": true,
      "title": "AdGuard API Token",
      "description": "Your AdGuard DNS access token",
      "placeholder": "Enter your access token"
    },
    {
      "name": "adguardRefreshToken",
      "type": "password",
      "required": true,
      "title": "AdGuard Refresh Token",
      "description": "Your AdGuard DNS refresh token",
      "placeholder": "Enter your refresh token"
    },
    {
      "name": "adguardDnsServerId",
      "type": "textfield",
      "required": true,
      "title": "DNS Server ID",
      "description": "Your AdGuard DNS server ID",
      "placeholder": "Enter your DNS server ID"
    }
  ],
  "ai": {
    "instructions": "You are a DNS troubleshooting assistant. When a user reports an issue:\n\n1. Use get-query-log (default 10 min, expand to 30-60 min if needed)\n2. Analyze blocked domains - look for direct matches, CDNs (akamai, cloudfront, fastly), APIs, auth providers\n3. Show 2-3 most likely culprits with brief reasoning\n4. Ask: \"Should I unblock [domain1, domain2]?\" - be concise, no multiple choice questions\n5. When user confirms, unblock immediately and confirm success\n\nBe brief and direct. Don't give long explanations or multiple next-step options. If unsure, suggest expanding the time window. Never auto-unblock without confirmation.",
    "suggestedPrompts": [
      "Netflix isn't working",
      "My banking app won't load",
      "Show me what's been blocked in the last hour",
      "Why isn't YouTube loading?"
    ]
  },
  "scripts": {
    "build": "ray build -e dist",
    "dev": "ray develop",
    "fix-lint": "ray lint --fix",
    "lint": "ray lint",
    "publish": "npx @raycast/api@latest publish"
  },
  "dependencies": {
    "@raycast/api": "^1.103.3",
    "@raycast/utils": "^2.2.1"
  },
  "devDependencies": {
    "@raycast/eslint-config": "^2.1.1",
    "@types/node": "^20.19.21",
    "@types/react": "^19.2.2",
    "eslint": "^9.37.0",
    "prettier": "^3.6.2",
    "typescript": "^5.9.3"
  }
}
